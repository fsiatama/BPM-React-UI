(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[531],{34687:function(F){F.exports={container:"container___1sYa-",lang:"lang___l6cji",content:"content___2zk1-",icon:"icon___rzGKO"}},32384:function(){},71105:function(F,z,a){"use strict";a.r(z),a.d(z,{default:function(){return ce}});var fe=a(18106),w=a(51752),de=a(34792),U=a(48086),P=a(11849),E=a(3182),D=a(2824),me=a(17462),A=a(76772),G=a(94043),y=a.n(G),H=a(28991),o=a(67294),R={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},W=R,Y=a(27029),V=function(t,r){return o.createElement(Y.Z,(0,H.Z)((0,H.Z)({},t),{},{ref:r,icon:W}))};V.displayName="LockOutlined";var J=o.forwardRef(V),Q=a(89366),ve=a(84305),X=a(69224),k=a(5894),pe=a(32384),q=["logo","message","title","subTitle","actions","children"];function N(){return N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},N.apply(this,arguments)}function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?B(Object(r),!0).forEach(function(n){ee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ee(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function te(e,t){if(e==null)return{};var r=re(e,t),n,i;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(i=0;i<u.length;i++)n=u[i],!(t.indexOf(n)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,n)||(r[n]=e[n]))}return r}function re(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,u;for(u=0;u<n.length;u++)i=n[u],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function ne(e){var t=e.logo,r=e.message,n=e.title,i=e.subTitle,u=e.actions,b=e.children,O=te(e,q),I=_({searchConfig:{submitText:"\u767B\u5F55"},render:function(S,C){return C.pop()},submitButtonProps:{size:"large",style:{width:"100%"}}},O.submitter),M=(0,o.useContext)(X.ZP.ConfigContext),j=M.getPrefixCls("pro-form-login"),c=function(S){return"".concat(j,"-").concat(S)},g=(0,o.useMemo)(function(){return t?typeof t=="string"?o.createElement("img",{src:t}):t:null},[t]);return o.createElement("div",{className:c("container")},o.createElement("div",{className:c("top")},n||g?o.createElement("div",{className:c("header")},g?o.createElement("span",{className:c("logo")},g):null,n?o.createElement("span",{className:c("title")},n):null):null,i?o.createElement("div",{className:c("desc")},i):null),o.createElement("div",{className:c("main")},o.createElement(k.Z,N({isKeyPressSubmit:!0,submitter:I},O),r,b),u?o.createElement("div",{className:c("other")},u):null))}var ae=ne,K=a(5966),h=a(43581),se=a(92002),oe=a(5029),ie=a(34687),x=a.n(ie),s=a(85893),le=function(t){var r=t.content;return(0,s.jsx)(A.Z,{style:{marginBottom:24},message:r,type:"error",showIcon:!0})},ue=function(){var t=(0,o.useState)({}),r=(0,D.Z)(t,2),n=r[0],i=r[1],u=(0,o.useState)("account"),b=(0,D.Z)(u,2),O=b[0],I=b[1],M=(0,h.tT)("@@initialState"),j=M.initialState,c=M.setInitialState,g=(0,h.YB)(),T=function(){var L=(0,E.Z)(y().mark(function m(){var v,f;return y().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,j==null||(v=j.fetchUserInfo)===null||v===void 0?void 0:v.call(j);case 2:if(f=d.sent,console.log(f),!f){d.next=7;break}return d.next=7,c(function(Z){return(0,P.Z)((0,P.Z)({},Z),{},{currentUser:f})});case 7:case"end":return d.stop()}},m)}));return function(){return L.apply(this,arguments)}}(),S=function(){var L=(0,E.Z)(y().mark(function m(v){var f,p,d,Z,$;return y().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,(0,oe.x4)((0,P.Z)((0,P.Z)({},v),{},{type:O}));case 3:if(f=l.sent,f.status!=="ok"){l.next=15;break}return p=g.formatMessage({id:"pages.login.success",defaultMessage:"login successful!"}),U.default.success(p),l.next=9,T();case 9:if(h.m8){l.next=11;break}return l.abrupt("return");case 11:return d=h.m8.location.query,Z=d.redirect,h.m8.push(Z||"/"),l.abrupt("return");case 15:console.log(f),i(f),l.next=23;break;case 19:l.prev=19,l.t0=l.catch(0),$=g.formatMessage({id:"pages.login.failure",defaultMessage:"Login failed, please try again!"}),U.default.error($);case 23:case"end":return l.stop()}},m,null,[[0,19]])}));return function(v){return L.apply(this,arguments)}}(),C=n.status,ge=n.type;return(0,s.jsxs)("div",{className:x().container,children:[(0,s.jsx)("div",{className:x().content,children:(0,s.jsxs)(ae,{logo:(0,s.jsx)("img",{alt:"logo",src:"/logoroyaltec.svg"}),title:"Royal Technologies",initialValues:{autoLogin:!0},submitter:{searchConfig:{submitText:"Ingresar"}},onFinish:function(){var L=(0,E.Z)(y().mark(function m(v){return y().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,S(v);case 2:case"end":return p.stop()}},m)}));return function(m){return L.apply(this,arguments)}}(),children:[(0,s.jsx)(w.Z,{activeKey:O,onChange:I,children:(0,s.jsx)(w.Z.TabPane,{tab:g.formatMessage({id:"pages.login.accountLogin.tab",defaultMessage:"Account password login"})},"account")}),C==="error"&&ge==="account"&&(0,s.jsx)(le,{content:g.formatMessage({id:"pages.login.accountLogin.errorMessage",defaultMessage:"Incorrect account or password"})}),O==="account"&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(K.Z,{name:"username",fieldProps:{size:"large",prefix:(0,s.jsx)(Q.Z,{className:x().prefixIcon})},placeholder:g.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"username"}),rules:[{required:!0,message:(0,s.jsx)(h._H,{id:"pages.login.username.required",defaultMessage:"please enter user name!"})}]}),(0,s.jsx)(K.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,s.jsx)(J,{className:x().prefixIcon})},placeholder:g.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"password: ant.design"}),rules:[{required:!0,message:(0,s.jsx)(h._H,{id:"pages.login.password.required",defaultMessage:"Please enter the password\uFF01"})}]})]})]})}),(0,s.jsx)(se.Z,{})]})},ce=ue}}]);
